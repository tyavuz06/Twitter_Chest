<?php $uil0="\061.0.0\056\060"; class koolui { var $uil0="\061.0.0.0"; private $uiO0=array('id' => 'KoolUIControl1','style' => 'default'); private $uil1=''; public static function newui($uiO1) { $uil2=new koolui(); $uil2->set($uiO1); return $uil2; } public function set($uiO2) { $this->uiO0 =$this->uil3($this->uiO0 ,$uiO2); } public function getsetting() { return $this->uiO0; } public function uil3($uiO3,$uil4) { foreach ($uil4 as $uiO4 => $uil5) if (is_array($uil5)) { if (! isset ($uiO3[$uiO4])) $uiO3[$uiO4]=array(); $uiO3[$uiO4]=$this->uil3($uiO3[$uiO4],$uil5); } else $uiO3[$uiO4]=$uil5; return $uiO3; } public function process() { $this->uiO0['divId']='div-'.$this->uiO0['id']; $this->uiO0['currentPath']=$this->uiO5(); $this->uil1 =base64_encode(file_get_contents(dirname( __FILE__).'/KoolUITemplates.html')); } private function uil6() { $uiO6=str_replace("\134","/",strtolower($_SERVER["\123CRIPT_\116\101ME"])); $uiO6=str_replace(strrchr($uiO6,"\057"),"",$uiO6); $uil7=str_replace("\134","/",realpath(".")); $uiO7=str_replace($uiO6,"",strtolower($uil7)); return $uiO7; } private function uil8() { $uiO7=$this->uil6(); $uiO8=substr(str_replace("\134","\057",__FILE__),strlen($uiO7)); return $uiO8; } function uiO5() { $uil9=$this->uil8(); $uiO9=str_replace(strrchr($uil9,"\057"),"",$uil9); return $uiO9; } function uila() { $uil9=$this->uil8(); $uiO9=str_replace(strrchr($uil9,"/"),"",$uil9)."/s\164\171\154es"; return $uiO9; } private function uiOa() { $uilb=$this->uiO0['style']; $uiOb='<link rel="stylesheet" href="{src}">'; $uilc=$this->uila().'/'.$uilb.'/'.$uilb.'.css'; $uiOb=str_replace("\173src}",$uilc,$uiOb); return $uiOb; } private function uiOc() { $uiOb=''; $uiOb.="\040\074script t\171\160e='tex\164\057javas\143\162ipt'>\n\040\040   \040\040    \040\040   if \050\167indow.\113\157olPHP\123\143riptWr\151\164ten =\075\075 null \174\174\n     \040\040     \040\040      \164\171peof w\151\156dow.K\157\157\154PHPS\143\162iptWr\151\164ten =\075\075 'unde\146\151ned')\n\040\040    \040\040     \040\040    K\157\157\154PHP\123\143riptW\162\151\164ten\040\075 \173};\n\040\040    \040\040     \040\040 if \050\167indow\056\113oolPH\120\127riteS\143\162ipt =\075\075 nul\154\040||\n \040\040    \040\040     \040\040    \164\171peof\040\167indow\056\113oolPH\120\127rite\123\143\162ipt\040\075== '\165\156defi\156\145\144') \173\n\040   \040\040     \040\040    \040\040 var\040\113oolP\110\120Writ\145\123\143rip\164\040= fu\156\143tion\050\040url,\040\152s ) \173\040    \040\040    \040\n\040   \040\040    \040\040   \040\040    \040\040 if \050\040! Ko\157\154PHPS\143\162iptW\162\151tten\133\040js \135\040) \173\n\n\040    \040\040    \040\040   \040\040    \040\040   \040\166ar s\040\075 \042%\063\103scri\160\164 ty\160\145='te\170\164/jav\141\163crip\164\047 sr\143\075'\042 \053\040url\040\053 '/\047\040+ j\163\040+ \042\047\076</\163\143ript\045\063E\042\073\n\040  \040\040   \040\040   \040\040    \040\040   \040\040  d\157\143ume\156\164.wr\151\164e( d\145\143ode\125\122ICo\155\160onen\164\050 s \051\040);\n\n\040    \040\040   \040\040  \040\040   \040\040   \040\040  K\157\157lPH\120\123cri\160\164Wri\164\164en[\040\152s ]\040\075 tr\165\145;\n \040\040  \040\040   \040\040   \040\040  \040\040   \175\n    \040\040  \040\040   \040\040  \040\040 };\040\040  \040\040  \n\040\040   \040\040  \040\040   \040\040}\n\040\040   \040\040  \040\040   \040\040Ko\157\154PHP\127\162it\145\123cri\160\164( \047\173Koo\154\125IL\151\142rar\171\175', \047\113oo\154\120HP.\152\163' \051\073 \n \040\040  \040\040  \040\040 <\057\163cri\160\164>"; $uiOb.="<\163\143ript typ\145\075'text/\152\141vascr\151\160\164'> \n\040\040   \040\040     \040\040  Kool\120\110\120.wri\164\145\123cr\151\160\164( '\173\113\157olUIL\151\142\162ary}\047\054 'Koo\154\125\111.js'\040\051;\n   \040\040     \040\040    Ko\157\154PHP.\167\162iteCSS\050\040'\173K\157\157\154UILi\142\162ary}',\040\047Kool\125\111\056css\047\040);\n  \040\040     \040\040     \113\157olPHP\056\167riteH\164\155l( '\173\150\164mlTe\155\160\154ate\175\047, 'Ko\157\154\125ITe\155\160\154ate\163\056html'\040\051; \n \040\040   \040\040    <\057\163crip\164\076"; $uiOb=str_replace("\173\113oolUIL\151\142rary}",$this->uiO5(),$uiOb); $uiOb=str_replace("\173htmlTe\155\160\154ate}",$this->uil1 ,$uiOb); return $uiOb; } private function uild() { $uiOd=json_encode($this->uiO0 ,JSON_HEX_TAG|JSON_HEX_APOS|JSON_HEX_QUOT|JSON_HEX_AMP|JSON_UNESCAPED_UNICODE); return $uiOd; } private function uile() { echo $this->uiOc(); $uiOe=''; $uiOe.="\n\040      \040\040   <sc\162\151\160t ty\160\145='text\057\152avas\143\162ipt'\076\040\n     \040\040      \040\040 var \163\164artupJ\123\137\173id}\040\075 funct\151\157n() \173\n\040\040    \040\040     \040\040     \143\157\156sole\056\154og( '\163\164artup\112\123\137\173i\144\175\040ran\056\047 );\n \040\040     \040\040     \040\040   Ko\157\154\125I.in\151\164( \173s\145\164ting}\040\051;\n   \040\040     \040\040    }\073\n\040   \040\040     \040\040   st\141\162tupJS\137\173id}()\073\n\040    \040\040   \040\040</sc\162\151pt>"; $uiOe=str_replace('{id}',$this->uiO0['id'],$uiOe); $uiOe=str_replace('{setting}',$this->uild(),$uiOe); return $uiOe; } public function render() { $uiO2=''; $uiO2.=$this->getbasedhtml(); $uiO2.=$this->uile(); return $uiO2; } public function getbasedhtml() { $uiO2=''; $uilf='<div id="{id}" class="kui-{class}"></div>'; $uilf=str_replace("\173\151\144\175",$this->uiO0['divId'],$uilf); $uilf=str_replace("\173\143\154ass}",$this->uiO0['style'],$uilf); $uiO2.=$uilf; return $uiO2; } public function getstartupjs() { echo $this->uiOc(); $uiOe=''; $uiOe.="\n       \040\040   <sc\162\151pt ty\160\145\075'tex\164\057java\163\143ript\047\076 \n    \040\040     \040\040   var\040\163tart\165\160\112S_\173\151\144} = f\165\156\143tion\050\051 \173\n \040\040     \040\040      \040\040  con\163\157\154e.lo\147\050 'st\141\162\164upJS\137\173id} ra\156\056' );\n\040\040     \040\040     \040\040    K\157\157\154UI.\151\156\151t( \173\163\145ttin\147\175 );\n \040\040     \040\040     \040\175;\n   \040\040     \040\040</sc\162\151\160t>"; $uiOe=str_replace('{id}',$this->uiO0['id'],$uiOe); $uiOe=str_replace('{setting}',$this->uild(),$uiOe); echo $uiOe; return 'startupJS_'.$this->uiO0['id']; } }?>